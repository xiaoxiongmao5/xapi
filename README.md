# xapi (APIå¼€æ”¾å¹³å°)

åœ¨çº¿è®¿é—®ï¼š <a target="_blank" href="http://101.132.169.210:8080">XAPI</a>

## é¡¹ç›®ä»‹ç»

åŸºäº React + Golang + Gin + Dubbo-go çš„ APIæ¥å£å¼€æ”¾è°ƒç”¨å¹³å°ã€‚

ç®¡ç†å‘˜å¯ä»¥æ¥å…¥å¹¶å‘å¸ƒæ¥å£ï¼ŒåŒæ—¶ç»Ÿè®¡åˆ†æå„æ¥å£çš„è°ƒç”¨æƒ…å†µï¼›ç”¨æˆ·å¯ä»¥æ³¨å†Œç™»å½•å¹¶å¼€é€šæ¥å£è°ƒç”¨æƒé™ï¼Œæµè§ˆæ¥å£ä»¥åŠåœ¨çº¿è¿›è¡Œè°ƒè¯•ï¼Œå¹¶å¯ä»¥é€šè¿‡ å®¢æˆ·ç«¯SDK è½»æ¾è°ƒç”¨æ¥å£ã€‚

## é¡¹ç›®æ¶æ„è®¾è®¡

è¿™ä¸ªé¡¹ç›®çš„æ¶æ„æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆ†å¸ƒå¼ç³»ç»Ÿï¼ŒåŒ…æ‹¬å¤šä¸ªç‹¬ç«‹çš„å­é¡¹ç›®ï¼Œæ¯ä¸ªå­é¡¹ç›®å…·æœ‰ç‰¹å®šçš„åŠŸèƒ½å’ŒèŒè´£ã€‚ä»¥ä¸‹æ˜¯æ¯ä¸ªå­é¡¹ç›®çš„åŠŸèƒ½å’Œå…³ç³»ã€‚

1. __å‰ç«¯é¡¹ç›®__ [GitHub: xapi-frontend](https://github.com/xiaoxiongmao5/xapi-frontend) ï¼šæä¾›ç”¨æˆ·ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥ç™»å½•ã€æŸ¥çœ‹æ¥å£åˆ—è¡¨ã€å‘èµ·æ¥å£è°ƒç”¨ã€‚
2. __åç«¯é¡¹ç›®__ [GitHub: xapi-backend](https://github.com/xiaoxiongmao5/xapi-backend) ï¼šæä¾›ç”¨æˆ·è®¤è¯ã€æ¥å£ç®¡ç†ã€è´¦å·ç®¡ç†ã€æ¥å£è°ƒç”¨åŠŸèƒ½ã€‚
3. __ç½‘å…³é¡¹ç›®__ [GitHub: xapi-gateway](https://github.com/xiaoxiongmao5/xapi-gateway) ï¼šç»Ÿä¸€é‰´æƒã€é™æµã€è·¯ç”±è½¬å‘ã€ç»Ÿä¸€æ—¥å¿—ã€æ¥å£æŸ“è‰²ã€ç»Ÿä¸€ä¸šåŠ¡å¤„ç†ç­‰ã€‚
4. __å®¢æˆ·ç«¯SDK__ [GitHub: xapi-clientsdk](https://github.com/xiaoxiongmao5/xapi-clientsdk) ï¼šå°è£…äº†å¯¹æ¨¡æ‹Ÿæ¥å£é¡¹ç›®çš„è°ƒç”¨ï¼Œæä¾›äº†ç®€åŒ–çš„APIä»¥ä¾¿å…¶ä»–é¡¹ç›®ä½¿ç”¨ã€‚
5. __æ¨¡æ‹Ÿæ¥å£é¡¹ç›®__ ï¼šæ¨¡æ‹Ÿç¬¬ä¸‰æ–¹æ¥å£ï¼Œä¾›å®¢æˆ·ç«¯SDKè°ƒç”¨ï¼Œç”¨äºå¼€å‘å’Œæµ‹è¯•ã€‚ï¼ˆè¿™ä¸ªå­é¡¹ç›®åœ¨è¯¥é¡¹ç›®ä¸­å±äºç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œå¯ä½¿ç”¨ç¬¬ä¸‰æ–¹åœ¨çº¿æœåŠ¡æˆ–æœ¬åœ°å¼€å‘é¡¹ç›®ï¼Œæˆ‘ç›´æ¥ä½¿ç”¨çš„æœ¬åœ°ç®€å•é¡¹ç›®ï¼Œå°±ä¸åˆ›å»ºä»“åº“äº†ï¼‰

## é¡¹ç›®å±•ç¤º

![image](https://github.com/xiaoxiongmao5/xapi/assets/25204083/22b1d465-e12f-4881-ae87-79218bbc2eda)

![image](https://github.com/xiaoxiongmao5/xapi/assets/25204083/73f56252-4589-4608-a99c-ad0e1e41df73)

## è°ƒç”¨æ¥å£çš„æµç¨‹å›¾
![image](https://github.com/xiaoxiongmao5/xapi/assets/25204083/9301951e-ad4d-4442-a6c4-1627d9c12ba6)



## æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯æ ˆ
* ä¸»è¯­è¨€ï¼šGolang
* æ¡†æ¶ï¼šGin
* æ•°æ®åº“ï¼šMysql8.0
* æ³¨å†Œä¸­å¿ƒï¼šNacos
* RPCè¿œç¨‹è°ƒç”¨ï¼šDubbo-go
* å¾®æœåŠ¡ç½‘å…³ï¼šGin
* æ¥å£æ–‡æ¡£ç”Ÿæˆï¼šswagger
* CRUDåŸºç¡€ä»£ç ç”Ÿæˆï¼šsqlc
* æŠ€æœ¯è®¾è®¡ï¼šAPIç­¾åè®¤è¯
* å®¹å™¨åŒ–éƒ¨ç½²ï¼šDockerfileã€Docker Compose

### å‰ç«¯æŠ€æœ¯æ ˆ

* å¼€å‘æ¡†æ¶ï¼šReactã€Umi 4
* è„šæ‰‹æ¶ï¼šAnt Design Pro
* ç»„ä»¶åº“ï¼šAnt Designã€Ant Design Components
* è¯­æ³•æ‰©å±•ï¼šTypeScriptã€Less
* æ‰“åŒ…å·¥å…·ï¼šWebpack
* ä»£ç è§„èŒƒï¼šESLintã€StyleLintã€Prettier
* å›¾è¡¨å±•ç¤ºï¼šEchats
* æ¥å£ä»£ç ç”Ÿæˆï¼šOpenAPI

## å¿«é€Ÿä¸Šæ‰‹

### å®¹å™¨åŒ–éƒ¨ç½²ï¼ˆæ¨èâ­ï¸ï¼‰

1. å…‹éš†è¯¥é¡¹ç›®åˆ°æœ¬åœ°
    ```bash
    git clone https://github.com/xiaoxiongmao5/xapi.git
    ```
2. ä¿®æ”¹é…ç½®
    ```bash
    vim docker-xapi/docker-compose.yml
    ```
    ä¿®æ”¹ `services.backend.extra_hosts` ,å°† `xapi-gateway.com` åŸŸåè§£æçš„IP æ”¹ä¸ºä½ éƒ¨ç½²çš„æœåŠ¡å™¨çš„IPï¼ˆå¦‚æœç«¯å£8080å¹¶æœªå¯¹å¤–å¼€æ”¾ï¼Œå°±è®¾ç½®ä¸ºå†…ç½‘IPï¼‰
3. [å¯é€‰] æ·»åŠ è®¿é—®æ‹¦æˆªé»‘åå•
    ```bash
    vim docker-xapi/docker-xapi-backend/conf/appconfig.json
    vim docker-xapi/docker-xapi-gateway/conf/appconfig.json
    ```
    æ·»åŠ è¦æ‹¦æˆªçš„ ip åˆ° `ipBlackList`ä¸­ã€‚
4. å¯åŠ¨é¡¹ç›®
    ```bash
    docker compose up -d
    ```

### å•ä¸ªé¡¹ç›®éƒ¨ç½²

æŒ‰ç…§ä»¥ä¸‹é¡ºåºéƒ¨ç½²é¡¹ç›®
1. å¯åŠ¨ `nacos` æœåŠ¡
åˆ›å»º docker-compose.yml
    ```yml
    version: '2'
    services:
      nacos:
        image: nacos/nacos-server:v2.1.2-slim
        container_name: nacos
        restart: always
        volumes:
          - ./data/nacos/logs:/home/nacos/logs
        environment:
          TZ: Asia/Shanghai
          LANG: en_US.UTF-8
          MODE: standalone
        ports:
          - "8848:8848"
        cpu_shares: 4
        mem_limit: 2048M
    ```
    è¿è¡Œ `docker compose up -d`
2. éƒ¨ç½² `ç½‘å…³ gateway` é¡¹ç›®
    ä¸‹è½½é¡¹ç›®åˆ°éƒ¨ç½²æœåŠ¡å™¨ä¸Šï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œgo build ç¼–è¯‘ï¼Œè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶
3. éƒ¨ç½² `åç«¯ backend` é¡¹ç›®
    1. å…ˆå®‰è£…å¹¶å¯åŠ¨MySQL
    2. åœ¨MySQLä¸­è¿è¡Œ `docker-xapi/init.sql`ï¼Œåˆå§‹åŒ–æ•°æ®
    3. ä¸‹è½½é¡¹ç›®åˆ°éƒ¨ç½²æœåŠ¡å™¨ä¸Šï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œgo build ç¼–è¯‘ï¼Œè¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶
4. éƒ¨ç½² `å‰ç«¯ frontend` é¡¹ç›®
    buildé¡¹ç›®åï¼Œæ”¾åœ¨éƒ¨ç½²æœåŠ¡å™¨ä¸Šï¼Œä½¿ç”¨Nginxä»£ç†è®¿é—®

## é¡¹ç›®è¿‡ç¨‹ä¸­çš„æ–‡ç« äº§å‡º ğŸ“š

* [APIç­¾åè®¤è¯çš„è¯´æ˜åŠå®ç°](https://blog.csdn.net/trinityleo5/article/details/132591491?spm=1001.2014.3001.5502)
* [Golangç¼–å†™å®¢æˆ·ç«¯SDKï¼Œå¹¶å¼€æºå‘å¸ƒåŒ…åˆ°GitHubï¼Œä¾›å…¶ä»–é¡¹ç›®importä½¿ç”¨](https://blog.csdn.net/trinityleo5/article/details/132673793?spm=1001.2014.3001.5502)
* [ä»‹ç» dubbo-go å¹¶åœ¨Macä¸Šå®‰è£…ï¼Œå®Œæˆä¸€æ¬¡è‡ªå·±å®šä¹‰çš„æ¥å£RPCè°ƒç”¨](https://blog.csdn.net/trinityleo5/article/details/132622712?spm=1001.2014.3001.5502)
* [å°†æœ¬åœ°æ„å»ºçš„é•œåƒæ¨é€åˆ°è¿œç¨‹é•œåƒåº“ï¼Œæ„å»ºå¤šç§ç³»ç»Ÿæ¶æ„æ”¯æŒçš„Dockeré•œåƒå¹¶æ¨é€åˆ°Docker Hub](https://blog.csdn.net/trinityleo5/article/details/132791172?spm=1001.2014.3001.5502)
* [è§£å†³è¿è¡ŒDockeré•œåƒæŠ¥é”™ï¼šversion `GLIBC_2.32â€˜ not found](https://blog.csdn.net/trinityleo5/article/details/132877098?spm=1001.2014.3001.5502)
* [è®°å½•ä½¿ç”¨Docker Compose éƒ¨ç½²ã€ŠXAPIé¡¹ç›®ã€‹é‡é“çš„é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ](https://blog.csdn.net/trinityleo5/article/details/132877817)
* [Golangç¼–å†™è‡ªå®šä¹‰IPé™æµä¸­é—´ä»¶](https://blog.csdn.net/trinityleo5/article/details/132889703)
* [XAPIé¡¹ç›®æ¶æ„ï¼šåº”å¯¹ç¬¬ä¸‰æ–¹ç­¾åè®¤è¯çš„è®¾è®¡ä¸è°ƒæ•´](https://blog.csdn.net/trinityleo5/article/details/132947750?spm=1001.2014.3001.5501)

## æ¬¢è¿è´¡çŒ®

é¡¹ç›®éœ€è¦å¤§å®¶çš„æ”¯æŒï¼ŒæœŸå¾…æ›´å¤šå°ä¼™ä¼´çš„è´¡çŒ®ï¼Œä½ å¯ä»¥ï¼š

* å¯¹äºé¡¹ç›®ä¸­çš„Bugå’Œä¼˜åŒ–å»ºè®®ï¼Œå¯ä»¥æissuesï¼Œæˆ‘ä¼šç§¯æå“åº”ã€‚
